Ý
^D:\Dakota\OneDriveOU\School\CS3560\repos\3560-Project-Spring2021\Assets\Nick\scripts\Health.cs
public 
class 
Health 
: 
MonoBehaviour #
{$ %
[		 
SerializeField		 
]		 
private		 
int		  
	maxHealth		! *
=		+ ,
$num		- 0
;		0 1
private

 
int

 
currentHealth

 
;

 
public 

event 
Action 
< 
float 
> 
OnHealthPctChanged 1
=2 3
delegate4 <
{= >
}? @
;@ A
public 

event 
Action 
OnDeath 
=  !
delegate" *
{+ ,
}- .
;. /
private 
void 
OnEnable 
( 
) 
{ 
currentHealth 
= 
	maxHealth !
;! "
OnHealthPctChanged 
+= 
percent %
=>& (
{) *
if 
( 
percent 
<= 
$num 
) 
OnDeath %
.% &
Invoke& ,
(, -
)- .
;. /
} 	
;	 

} 
public 

void 
ModifyHealth 
( 
int  
amount! '
)' (
{) *
currentHealth 
= 
Mathf 
. 
Clamp #
(# $
currentHealth$ 1
+2 3
amount4 :
,: ;
-< =
	maxHealth= F
,F G
	maxHealthH Q
)Q R
;R S
float 
currentHealthPct 
=  
(! "
float" '
)' (
currentHealth( 5
/6 7
	maxHealth8 A
;A B
OnHealthPctChanged 
( 
currentHealthPct +
)+ ,
;, -
} 
} •
kD:\Dakota\OneDriveOU\School\CS3560\repos\3560-Project-Spring2021\Assets\Nick\scripts\PlayerHealthManager.cs
public 
class 
PlayerHealthManager  
:! "
MonoBehaviour# 0
{1 2
public 

Health 
Health 
; 
public 

float 
	RegenTime 
= 
$num 
;  
public 

float 
RegenCooldown 
=  
$num! %
;% &
public		 

int		 
RegenAmount		 
=		 
$num		 
;		 
private

 
float

 
previousPercent

 !
=

" #
$num

$ '
;

' (
private 
float 
lastHit 
; 
private 
float 
	lastRegen 
; 
void 
Start	 
( 
) 
{ 
Health 
= 
Health 
? 
Health  
:! "
GetComponent# /
</ 0
Health0 6
>6 7
(7 8
)8 9
;9 :
if 

( 
Health 
!= 
null 
) 
{ 
Health 
. 
OnHealthPctChanged %
+=& (
percent) 0
=>1 3
{4 5
if 
( 
percent 
< 
previousPercent -
)- .
lastHit/ 6
=7 8
Time9 =
.= >
time> B
;B C
previousPercent 
=  !
percent" )
;) *
} 
; 
Health 
. 
OnDeath 
+= 
( 
)  
=>! #
{$ %
Destroy 
( 

gameObject "
," #
$num$ %
)% &
;& '
var 
GUI 
= 

GameObject $
.$ %
Find% )
() *
$str* 6
)6 7
;7 8
var 
gameOver 
= 
GUI "
?" #
.# $
	transform$ -
.- .
Find. 2
(2 3
$str3 =
)= >
;> ?
gameOver 
? 
. 

gameObject $
.$ %
	SetActive% .
(. /
true/ 3
)3 4
;4 5
} 
; 
} 	
} 
void 
FixedUpdate	 
( 
) 
{ 
var   
t   
=   
Time   
.   
time   
;   
if!! 

(!! 
t!! 
-!! 
lastHit!! 
>!! 
	RegenTime!! #
&&!!$ &
t!!' (
-!!) *
	lastRegen!!+ 4
>!!5 6
RegenCooldown!!7 D
)!!D E
{!!F G
Health"" 
."" 
ModifyHealth"" 
(""  
RegenAmount""  +
)""+ ,
;"", -
	lastRegen## 
=## 
t## 
;## 
}$$ 	
}%% 
void'' 
	OnDestroy''	 
('' 
)'' 
{'' 
Application(( 
.(( 
Quit(( 
((( 
$num(( 
)(( 
;(( 
})) 
}** 